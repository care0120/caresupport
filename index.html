
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>LINEログイン</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <h2>LINEログイン中...</h2>

  <script>
    liff.init({
      liffId: "1657254156-85059NlX"
    }).then(() => {
      if (!liff.isLoggedIn()) {
        liff.login();
      } else {
        liff.getProfile().then(profile => {
          alert("こんにちは、" + profile.displayName + " さん！");
          setTimeout(() => {
            const name = encodeURIComponent(profile.displayName);
            const userId = encodeURIComponent(profile.userId);
            window.location.href = `health_form_complete1.html?name=${name}&userId=${userId}`;
          }, 500);
        });
      }
    }).catch(err => {
      console.error("LIFF初期化失敗:", err);
      alert("LINEログインに失敗しました。");
    });
  </script>
</body>
</html>
