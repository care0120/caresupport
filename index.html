
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>LINEログインページ</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <h2>LINEログインしてください</h2>
  <button onclick="loginWithLINE()">LINEでログイン</button>

  <script>
    function loginWithLINE() {
      liff.init({
        liffId: "1657254156-85059NlX"
      }).then(() => {
        if (!liff.isLoggedIn()) {
          liff.login(); // ログインしてない場合、ログイン画面へ
        } else {
          liff.getProfile().then(profile => {
            alert("こんにちは、" + profile.displayName + "さん！");
            // ログイン済みならフォームページへ遷移
            window.location.href = "health_form_complete1.html";
          });
        }
      }).catch(err => {
        console.error("LIFFの初期化に失敗しました:", err);
        alert("エラーが発生しました。もう一度お試しください。");
      });
    }
  </script>
</body>
</html>
